(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{484:function(t,n,e){"use strict";e.r(n);var s=e(2),r=Object(s.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"history模式的坑"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#history模式的坑"}},[t._v("#")]),t._v(" history模式的坑")]),t._v(" "),n("p",[t._v("什么？404？不可能，我本地跑的可好了？你清下缓存吧.jpg")]),t._v(" "),n("p",[t._v("相信这是绝大数人都会遇到的一个问题吧，项目本地跑的好好的，一旦打包上线，就404了，我们需要重新配置下nginx服务代理")]),t._v(" "),n("p",[t._v("刚开始的配置是：")]),t._v(" "),n("div",{staticClass:"language-conf extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("server {\n    listen 30002;\n    server_name  域名/外网IP;\n    index index.html;\n    root  /www/server/dist;  #dist上传的路径\n    # 避免访问出现 404 错误\n    error_page 404 /index.html;\n}\n")])])]),n("p",[t._v("修改后的配置：")]),t._v(" "),n("div",{staticClass:"language-conf extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("{\n    listen 30002;\n    server_name 域名/外网IP;\n    index index.html;\n    root  /www/server/dist;  #dist上传的路径\n    location / {\n    \ttry_files $uri $uri/ @router; \n    \tindex  index.html;\n    }\n    #重定向\n    location @router {\n    \trewrite ^.*$ /index.html last;\n    }  \n}\n")])])]),n("div",{staticClass:"custom-block tip"},[n("p",[t._v("之所以要配置重定向代理是因为，history模式下的坑，history模式下，/list不等于/index.html/list，他会去找该路径下的list，因为默认不会从index.html出发，而是/list，发现/list没有，所以就404了，如果从index.html出发就不会有这种bug了，所以我们只要他没有去到正确路径的话，就重定向到index.html下，再去查找；当然，如果你用hash模式，就不会有这种问题。")])])])}),[],!1,null,null,null);n.default=r.exports}}]);