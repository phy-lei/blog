<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>taro-solidæˆ‘åšäº†ä»€ä¹ˆäº‹ | phy-lei</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/blog/favicon3.ico">
    <link rel="manifest" href="/blog/manifest.json">
    <link rel="apple-touch-icon" href="/blog/icons/icon-152x152.png">
    <link rel="mask-icon" href="/blog/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="æ®‹ç•™æå¤´çš„æ¨±èŠ±ç“£ï¼Œä¹Ÿç»ˆå°†è¿æ¥å‡‹é›¶çš„å‘½è¿">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/blog/assets/css/0.styles.9a13c917.css" as="style"><link rel="preload" href="/blog/assets/js/app.cc9a024a.js" as="script"><link rel="preload" href="/blog/assets/js/3.db1300e1.js" as="script"><link rel="preload" href="/blog/assets/js/1.83ab4468.js" as="script"><link rel="preload" href="/blog/assets/js/46.3a33d0a3.js" as="script"><link rel="preload" href="/blog/assets/js/10.c35fdf02.js" as="script"><link rel="prefetch" href="/blog/assets/js/11.2bd0d46c.js"><link rel="prefetch" href="/blog/assets/js/12.03fbf9d6.js"><link rel="prefetch" href="/blog/assets/js/13.fb421e4a.js"><link rel="prefetch" href="/blog/assets/js/14.8df0cca7.js"><link rel="prefetch" href="/blog/assets/js/15.83a9d7a5.js"><link rel="prefetch" href="/blog/assets/js/16.d1a10e76.js"><link rel="prefetch" href="/blog/assets/js/17.c3dc14f5.js"><link rel="prefetch" href="/blog/assets/js/18.5a64d7a5.js"><link rel="prefetch" href="/blog/assets/js/19.89fa4ca6.js"><link rel="prefetch" href="/blog/assets/js/20.038d0cf5.js"><link rel="prefetch" href="/blog/assets/js/21.c2b528ce.js"><link rel="prefetch" href="/blog/assets/js/22.cd885551.js"><link rel="prefetch" href="/blog/assets/js/23.311054de.js"><link rel="prefetch" href="/blog/assets/js/24.9a584cdf.js"><link rel="prefetch" href="/blog/assets/js/25.88cfe008.js"><link rel="prefetch" href="/blog/assets/js/26.e9e81028.js"><link rel="prefetch" href="/blog/assets/js/27.8a9b7ccf.js"><link rel="prefetch" href="/blog/assets/js/28.39890126.js"><link rel="prefetch" href="/blog/assets/js/29.2ebef512.js"><link rel="prefetch" href="/blog/assets/js/30.48c6b808.js"><link rel="prefetch" href="/blog/assets/js/31.419de084.js"><link rel="prefetch" href="/blog/assets/js/32.f0465e38.js"><link rel="prefetch" href="/blog/assets/js/33.2d7034b4.js"><link rel="prefetch" href="/blog/assets/js/34.d1a0ff8f.js"><link rel="prefetch" href="/blog/assets/js/35.b5cb965e.js"><link rel="prefetch" href="/blog/assets/js/36.1e6790b9.js"><link rel="prefetch" href="/blog/assets/js/37.237c025c.js"><link rel="prefetch" href="/blog/assets/js/38.85826116.js"><link rel="prefetch" href="/blog/assets/js/39.c149d470.js"><link rel="prefetch" href="/blog/assets/js/4.339729e1.js"><link rel="prefetch" href="/blog/assets/js/40.fe528f5a.js"><link rel="prefetch" href="/blog/assets/js/41.834839d0.js"><link rel="prefetch" href="/blog/assets/js/42.47021439.js"><link rel="prefetch" href="/blog/assets/js/43.6e660ac6.js"><link rel="prefetch" href="/blog/assets/js/44.b89560be.js"><link rel="prefetch" href="/blog/assets/js/45.37c4d8b7.js"><link rel="prefetch" href="/blog/assets/js/47.1b8689a0.js"><link rel="prefetch" href="/blog/assets/js/48.c25885fc.js"><link rel="prefetch" href="/blog/assets/js/49.0325f1e9.js"><link rel="prefetch" href="/blog/assets/js/5.2202e623.js"><link rel="prefetch" href="/blog/assets/js/50.786da955.js"><link rel="prefetch" href="/blog/assets/js/51.88b6dd57.js"><link rel="prefetch" href="/blog/assets/js/52.91980065.js"><link rel="prefetch" href="/blog/assets/js/53.cc680d92.js"><link rel="prefetch" href="/blog/assets/js/54.70028eae.js"><link rel="prefetch" href="/blog/assets/js/6.a1fd875e.js"><link rel="prefetch" href="/blog/assets/js/7.fb3f8319.js"><link rel="prefetch" href="/blog/assets/js/8.14261d42.js"><link rel="prefetch" href="/blog/assets/js/9.16585bcc.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.9a13c917.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-19557b78><div data-v-19557b78><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-19557b78 data-v-19557b78><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-19557b78 data-v-19557b78><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>phy-lei</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>phy-lei</span>
          Â Â 
          <!---->
          2024
        </a></span></div></div> <div class="hide" data-v-19557b78><header class="navbar" data-v-19557b78><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/mine.jpg" alt="phy-lei" class="logo"> <span class="site-name">phy-lei</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/article/" class="nav-link"><i class="iconfont undefined"></i>
  article
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/css/" class="nav-link"><i class="iconfont undefined"></i>
  css
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/git/" class="nav-link"><i class="iconfont undefined"></i>
  git
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/linux/" class="nav-link"><i class="iconfont undefined"></i>
  linux
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/react/" class="nav-link"><i class="iconfont undefined"></i>
  react
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/vue/" class="nav-link"><i class="iconfont undefined"></i>
  vue
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/vuepress/" class="nav-link"><i class="iconfont undefined"></i>
  vuepress
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/å‰ç«¯çš„é‚£äº›äº‹å„¿/" class="nav-link"><i class="iconfont undefined"></i>
  å‰ç«¯çš„é‚£äº›äº‹å„¿
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/æˆé•¿ä¹‹è·¯/" class="nav-link"><i class="iconfont undefined"></i>
  æˆé•¿ä¹‹è·¯
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/æ•°æ®ç»“æ„ä¸ç®—æ³•/" class="nav-link"><i class="iconfont undefined"></i>
  æ•°æ®ç»“æ„ä¸ç®—æ³•
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/é¢è¯•/" class="nav-link"><i class="iconfont undefined"></i>
  é¢è¯•
</a></li></ul></div></div><div class="nav-item"><a href="/blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/phy-lei" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-19557b78></div> <aside class="sidebar" data-v-19557b78><div class="personal-info-wrapper" data-v-b038cec6><img src="/blog/mine.jpg" alt="author-avatar" class="personal-img" data-v-b038cec6> <h3 class="name" data-v-b038cec6>
    phy-lei
  </h3> <div class="num" data-v-b038cec6><div data-v-b038cec6><h3 data-v-b038cec6>41</h3> <h6 data-v-b038cec6>Article</h6></div> <div data-v-b038cec6><h3 data-v-b038cec6>12</h3> <h6 data-v-b038cec6>Tag</h6></div></div> <hr data-v-b038cec6></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/article/" class="nav-link"><i class="iconfont undefined"></i>
  article
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/css/" class="nav-link"><i class="iconfont undefined"></i>
  css
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/git/" class="nav-link"><i class="iconfont undefined"></i>
  git
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/linux/" class="nav-link"><i class="iconfont undefined"></i>
  linux
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/react/" class="nav-link"><i class="iconfont undefined"></i>
  react
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/vue/" class="nav-link"><i class="iconfont undefined"></i>
  vue
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/vuepress/" class="nav-link"><i class="iconfont undefined"></i>
  vuepress
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/å‰ç«¯çš„é‚£äº›äº‹å„¿/" class="nav-link"><i class="iconfont undefined"></i>
  å‰ç«¯çš„é‚£äº›äº‹å„¿
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/æˆé•¿ä¹‹è·¯/" class="nav-link"><i class="iconfont undefined"></i>
  æˆé•¿ä¹‹è·¯
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/æ•°æ®ç»“æ„ä¸ç®—æ³•/" class="nav-link"><i class="iconfont undefined"></i>
  æ•°æ®ç»“æ„ä¸ç®—æ³•
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/é¢è¯•/" class="nav-link"><i class="iconfont undefined"></i>
  é¢è¯•
</a></li></ul></div></div><div class="nav-item"><a href="/blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/phy-lei" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>taro-solidæˆ‘åšäº†ä»€ä¹ˆäº‹</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/20240419/#å‰æƒ…æè¦" class="sidebar-link">å‰æƒ…æè¦</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/20240419/#è¿‘å†µ" class="sidebar-link">è¿‘å†µ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/20240419/#å°ç¨‹åºç«¯çš„è§£å†³" class="sidebar-link">å°ç¨‹åºç«¯çš„è§£å†³</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/20240419/#å¥—å¨ƒ" class="sidebar-link">å¥—å¨ƒ</a></li><li class="sidebar-sub-header"><a href="/blog/20240419/#babel" class="sidebar-link">babel</a></li></ul></li><li><a href="/blog/20240419/#h5ç«¯çš„è§£å†³" class="sidebar-link">H5ç«¯çš„è§£å†³</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/20240419/#stencil-solid-output" class="sidebar-link">stencil-solid-output</a></li><li class="sidebar-sub-header"><a href="/blog/20240419/#createsolidcomponent" class="sidebar-link">createSolidComponent</a></li></ul></li><li><a href="/blog/20240419/#æ€»ç»“" class="sidebar-link">æ€»ç»“</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-19557b78><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>taro-solidæˆ‘åšäº†ä»€ä¹ˆäº‹</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>phy-lei</span>
          Â Â 
          <!---->
          2024
        </a></span></div></div> <div data-v-19557b78><main class="page"><div class="page-title" style="display:none;"><h1>taro-solidæˆ‘åšäº†ä»€ä¹ˆäº‹</h1> <hr> <div data-v-484a899e><i class="iconfont reco-account" data-v-484a899e><span data-v-484a899e>phy-lei</span></i> <i class="iconfont reco-date" data-v-484a899e><span data-v-484a899e>2024-04-19</span></i> <!----> <i class="iconfont reco-tag tags" data-v-484a899e><span class="tag-item" data-v-484a899e>
      æˆé•¿ä¹‹è·¯
    </span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h2 id="å‰æƒ…æè¦"><a href="#å‰æƒ…æè¦" class="header-anchor">#</a> å‰æƒ…æè¦</h2> <p>åœ¨ä¸Šä¸€æœŸç‰ˆæœ¬è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œä¸»è¦è§£å†³äº†æ”¶é›†é¡¹ç›®@tarojs/componentsä½¿ç”¨åˆ°çš„ç»„ä»¶ï¼Œå¿˜è®°äº†çš„å®¶äººä»¬ï¼Œ<a href="https://juejin.cn/post/7350835151871705127" target="_blank" rel="noopener noreferrer">ä¼ é€é—¨<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>å›é¡¾ä¸‹å§ã€‚</p> <h2 id="è¿‘å†µ"><a href="#è¿‘å†µ" class="header-anchor">#</a> è¿‘å†µ</h2> <p>æœ‰ä¸€å¤©ï¼Œæˆ‘çœ‹åˆ°æœ‰ç¯‡<a href="https://juejin.cn/post/7330792655125463067" target="_blank" rel="noopener noreferrer">taroå®˜æ–¹æ–‡ç« <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼Œä¸»è¦ä»‹ç»äº†4.xç‰ˆæœ¬è¦å‘å¸ƒçš„å†…å®¹ï¼Œå‘ç°ä»–ä»¬å±…ç„¶å‡†å¤‡è¦å‘å¸ƒviteçš„ç‰¹æ€§äº†ï¼Œåœ¨ä¹‹å‰æˆ‘å°±æŒºæœŸå¾…èƒ½å¤Ÿåœ¨taroä½¿ç”¨viteè¿è¡Œï¼Œæ‰€ä»¥å°±æ‰“ç®—å»å®ç°taro-solidæ’ä»¶çš„viteæ”¯æŒï¼Œç¬¬ä¸€ä»¶äº‹ï¼Œè‚¯å®šæ˜¯å»çœ‹çœ‹å®˜æ–¹ä»“åº“æ˜¯æ€ä¹ˆæŠŠå„ä¸ªç¼–è¯‘å™¨æ’ä»¶é›†æˆè¿›å»çš„ï¼Œå¥½å®¶ä¼™ï¼Œä¸€çœ‹ä¸è¦ç´§ï¼Œæˆ‘çœ‹åˆ°äº†ä»–ä»¬å·²ç»åœ¨è¿ç§»solidç¼–è¯‘å™¨çš„ç›¸å…³å®ç°äº†ï¼Œçœ‹çœ‹æ—¶é—´å¥½åƒä¹Ÿå°±2å‘¨å‰ï¼Œä»”ç»†çœ‹äº†ä»–ä»¬solidä¸­çš„å®ç°ï¼Œå‘ç°ä»–ä»¬ä¹Ÿè·Ÿæˆ‘ä¸€å¼€å§‹ä¸€æ ·ï¼Œä¹Ÿæ˜¯å‚è€ƒä¸€ä»£ç›®çš„ä»£ç ï¼Œè‡ªè¡Œå®ç°äº†hå‡½æ•°ã€‚
è¿™ä¸å°±æ˜¯æˆ‘è¸©è¿‡çš„å‘å—ï¼Ÿ<a href="https://juejin.cn/post/7342148728135319564" target="_blank" rel="noopener noreferrer">ä¸€æœŸè®°å½•<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼Œäºæ˜¯æˆ‘å°±ç»™ä»–ä»¬æäº†ä¸ªissueï¼Œè¯´æ˜äº†ä¸‹è‡ªå®è¡Œhå‡½æ•°åœ¨å…¶ä¸­ä¼šå­˜åœ¨çš„bugï¼Œå¹¶è‡ªå‘Šå¥‹å‹‡æ¥è§£å†³è¿™ä¸ªbugï¼Œä»¥ä¸Šå°±æ˜¯æœ€è¿‘åœ¨åšçš„äº‹æƒ…ã€‚åœ¨è§£å†³è¿™ä¸ªbugçš„æ—¶å€™ï¼Œä¹Ÿé‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼ŒæœŸé—´ä¹Ÿå¤šäºäº†taroæŠ€æœ¯å§”å‘˜ä¼š@ZakaryCodeå¤§ä½¬å­œå­œä¸å€¦ä¸ºæˆ‘ç­”ç–‘ï¼Œä»¥è‡³äºèƒ½å¤Ÿé¡ºåˆ©å®Œæˆè¿™ä¸ªprğŸ«¡ã€‚ä¸‹é¢æ˜¯ä¸»è¦é‡åˆ°çš„é—®é¢˜çš„è®°å½•ã€‚</p> <h2 id="å°ç¨‹åºç«¯çš„è§£å†³"><a href="#å°ç¨‹åºç«¯çš„è§£å†³" class="header-anchor">#</a> å°ç¨‹åºç«¯çš„è§£å†³</h2> <p>ç®€ç®€å•å•æŠŠhå‡½æ•°åˆ é™¤å’¯ï¼Œæ¸…æ¸…çˆ½çˆ½ï¼Œå…³æœºï½ã€‚ç”±äºæˆ‘ä»¬ä¹‹å‰çš„æ’ä»¶ï¼Œä¹¦å†™å½¢å¼æ˜¯é‡‡ç”¨å°ç¨‹åºåŸç”Ÿçš„æ ‡ç­¾ï¼š</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>h-xl flex flex-col<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>w-full h-90 flex flex-nowrap items-center border border-gray-4 border-solid rounded-lg my-5 px-2 box-border<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>mr-2 pr-2 border-r-style-solid border border-gray-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      +86
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
      <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>è¯·è¾“å…¥æ‰‹æœºå·<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    ç™»å½•
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>è€Œè¿™ä¹Ÿåªèƒ½åœ¨å°ç¨‹åºç«¯ä½¿ç”¨ï¼Œå°±ä¸å¤ªç¬¦åˆtaroè·¨ç«¯çš„ç†å¿µï¼Œæ‰€ä»¥è¯´æˆ‘ä»¬è¿˜æ˜¯å¾—èµ°å¼•å…¥@tarojs/componentsåŒ…çš„ç»„ä»¶è¿›è¡Œä½¿ç”¨ï¼Œä½†æ˜¯ç©¶ç«Ÿå¦‚ä½•è®©ä»–èƒ½å¤Ÿé¡ºåˆ©ç¼–è¯‘ï¼Œæˆ‘æƒ³åˆ°äº†2ä¸ªæ–¹æ¡ˆã€‚</p> <h3 id="å¥—å¨ƒ"><a href="#å¥—å¨ƒ" class="header-anchor">#</a> å¥—å¨ƒ</h3> <p>åœ¨å°ç¨‹åºç«¯ï¼Œæˆ‘ä»¬å¼•ç”¨@tarojs/componentsåŒ…çš„ç»„ä»¶å…¶å®éƒ½æ˜¯stringç±»å‹çš„æ ‡ç­¾ï¼Œåœ¨solidç¼–è¯‘çš„æ—¶å€™ï¼Œç”±äºbabelå·²ç»è§£æè¿™é‡Œæ˜¯ä½¿ç”¨componentç¼–è¯‘ï¼Œå¯¼è‡´æŠ¥é”™ï¼Œé‚£ä¹ˆ<strong>åªè¦å°†è¿™ä»½å¯¼å‡ºå¤šå¥—ä¸€å±‚ï¼Œä½¿å…¶æˆä¸ºç»„ä»¶</strong>ï¼Œä¸å°±å¥½äº†ï¼Ÿ</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">View</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>view <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">Text</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>text <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">&gt;</span>
</code></pre></div><p>ä»ç»“è®ºä¸Šæ¥è¯´ï¼Œè¿™æ˜¯èƒ½æˆåŠŸç¼–è¯‘çš„ï¼Œä¸è¿‡ä»–å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨solidç»babelè½¬æ¢åçš„æºç ï¼Œä»–ä¼šå¤šåŠ get childrenï¼Œè¿™æ— è®ºåœ¨ç¼–è¯‘ä½“ç§¯ï¼Œè¿˜æ˜¯è¿è¡Œæ—¶æ€§èƒ½ï¼Œéƒ½ä¼šå­˜åœ¨ä¸€å®šçš„æŸè€—ï¼Œç‰¹åˆ«æ˜¯ç»„ä»¶å±‚çº§åµŒå¥—è¿‡æ·±çš„æ—¶å€™ï¼Œè¿™ä¸ªå¸¦æ¥çš„å½±å“å°±æ¯”è¾ƒæ˜æ˜¾ï¼Œè€Œä¸”å’±ä»¬è¿˜æ˜¯è¿è¡Œåœ¨å°ç¨‹åºç«¯ã€‚æ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆä¹Ÿæ˜¯æœ€ä½é€‰æ‹©é¡¹ã€‚
<img src="/blog/assets/20240419/01.png" alt=""></p> <h3 id="babel"><a href="#babel" class="header-anchor">#</a> babel</h3> <p>åˆè¿æ¥æˆ‘ä»¬å¸¸é©»å˜‰å®¾babelï¼Œæœ€è¿‘è€è·Ÿä»–æ‰“äº¤é“äº†å±äºæ˜¯ï¼Œåœ¨ä¹‹å‰æˆ‘ä»¬çš„è§£å†³ç­–ç•¥æ˜¯ï¼Œåœ¨babelè¿›è¡Œå°ç¨‹åºç»„ä»¶æ”¶é›†ï¼Œè®©ä»–èƒ½å¤Ÿé¡ºåˆ©ç¼–è¯‘ä½¿ç”¨åŸç”Ÿçš„å°ç¨‹åºæ ‡ç­¾ã€‚
é‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥æ€è·¯åè½¬ä¸€ä¸‹ï¼Œæˆ‘è¿˜æ˜¯ä½¿ç”¨jsxç»„ä»¶çš„å¼•å…¥å†™æ³•ï¼Œä½†æ˜¯åœ¨babelçš„transformElementçš„æ—¶å€™ï¼Œè¯†åˆ«å½“å‰çš„èŠ‚ç‚¹æ˜¯å¦æ˜¯@tarojs/componentsé‡Œçš„ï¼Œç„¶åè½¬æ¢ä¸ºå°ç¨‹åºçš„åŸç”Ÿæ ‡ç­¾ï¼Œè®©å…¶èµ°createElementçš„åˆ†æ”¯ï¼Œé‚£ä¹ˆç¼–è¯‘åçš„ç»“æœï¼Œä»ç†è®ºä¸Šæ¥è¯´ï¼Œæ˜¯è·Ÿå†™åŸç”Ÿå°ç¨‹åºæ ‡ç­¾æ˜¯ä¸€è‡´çš„ï¼Œæ€§èƒ½ä¸Šä¹Ÿæ˜¯æœ€ä¼˜è§£ã€‚ä½†æ˜¯æœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚æœç”¨æˆ·å†™çš„ç»„ä»¶è·Ÿ@tarojs/componentsé‡Œçš„ä¸€æ ·ï¼Œé‚£å²‚ä¸æ˜¯ç¼–è¯‘é”™ä¹±äº†ï¼Ÿ
babelè½¬æ¢ç»„ä»¶å¤„ç†åç¼–è¯‘ç»“æœï¼š
<img src="/blog/assets/20240419/02.png" alt=""></p> <p>å¤„ç†æµç¨‹å›¾ï¼š</p> <div class="language-mermaid extra-class"><pre class="language-text"><code>graph
A(tsxå•æ–‡ä»¶å…¥å£) --&gt; B[æ”¶é›†ç»„ä»¶]
B --transformElement--&gt; C{å½“å‰èŠ‚ç‚¹nodeæ˜¯å¦æ˜¯å°ç¨‹åºç»„ä»¶}
C --æ˜¯--&gt; D[æ”¹å˜tagNameä¸ºåŸç”Ÿæ ‡ç­¾]
C --å¦--&gt; E[ç»§ç»­å¾€ä¸‹æ‰§è¡Œ]
E --&gt; Z[æ–‡ä»¶transformå®Œæˆ&lt;br&gt;æ”¶é›†ç»„ä»¶ç¼“å­˜æ¸…ç©º]
D --&gt; F[ä½¿ç”¨createElementåˆ†æ”¯åˆ›å»ºå…ƒç´ ]
F --&gt; Z
</code></pre></div><h4 id="è§£å†³ç»„ä»¶é‡å"><a href="#è§£å†³ç»„ä»¶é‡å" class="header-anchor">#</a> è§£å†³ç»„ä»¶é‡å</h4> <p>ä¸ºäº†è§£å†³ç”¨æˆ·ä½¿ç”¨çš„ç»„ä»¶å‘½åæ˜¯è·Ÿ@tarojs/componentsé‡Œçš„å¯¼å‡ºå‘½åä¸€è‡´:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/components'</span>
<span class="token keyword">import</span> View <span class="token keyword">from</span> <span class="token string">'@/components/MyView'</span>
</code></pre></div><p>æˆ‘ä»¬å¯ä»¥å¯¹importçš„è¯­æ³•è¿›è¡Œåˆ†æï¼Œåªè¦æ”¶é›†'@tarojs/components'é‡Œimportè¿›æ¥çš„ç»„ä»¶å°±å¥½ï¼Œåœ¨babelé‡Œä¹Ÿæ˜¯èƒ½åšåˆ°è¿™ä¸ªçš„ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>visitor<span class="token operator">:</span> <span class="token punctuation">{</span>
  JSXElement<span class="token operator">:</span> transformJSX<span class="token punctuation">,</span>
  JSXFragment<span class="token operator">:</span> transformJSX<span class="token punctuation">,</span>
  Program<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">enter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> <span class="token punctuation">{</span> opts <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> taroComponentsMap <span class="token operator">=</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span>hub<span class="token punctuation">.</span>file<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>taroComponentsMap <span class="token operator">||</span><span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> stmt <span class="token keyword">of</span> path<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">isImportDeclaration</span><span class="token punctuation">(</span>stmt<span class="token punctuation">.</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// æ˜¯å¦æ˜¯@tarojs/componentsçš„åŒ…</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isTaroComponent</span><span class="token punctuation">(</span>stmt<span class="token punctuation">.</span>node<span class="token punctuation">.</span>source<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            stmt<span class="token punctuation">.</span>node<span class="token punctuation">.</span>specifiers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">specifier</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token comment">// åŒ…ä½“å¯¼å‡ºçš„å˜é‡å</span>
              <span class="token keyword">const</span> importedName <span class="token operator">=</span> specifier<span class="token punctuation">.</span>imported<span class="token punctuation">.</span>name
              taroComponentsMap<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>importedName<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>merged<span class="token punctuation">.</span>validate<span class="token punctuation">)</span> path<span class="token punctuation">.</span><span class="token function">traverse</span><span class="token punctuation">(</span>JSXValidator<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    exit<span class="token operator">:</span> postprocess
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨enterä¸­ï¼Œå¯ä»¥è·å–æ‰€æœ‰importè¿›æ¥çš„è¯­å¥ï¼ŒåŸºäºæ­¤ï¼Œå¯¹äºåˆ«çš„importè·¯å¾„ç»„ä»¶ï¼Œå³ä½¿é‡åï¼Œä¹Ÿä¸ä¼šå¯¹å…¶è¿›è¡Œæ”¶é›†ã€‚</p> <h4 id="è§£å†³ç»„ä»¶åˆ«å"><a href="#è§£å†³ç»„ä»¶åˆ«å" class="header-anchor">#</a> è§£å†³ç»„ä»¶åˆ«å</h4> <p>é™¤äº†éœ€è¦è§£å†³ç»„ä»¶é‡åå¤–ï¼Œè¿˜å­˜åœ¨å¦ä¸€ä¸ªéšæ‚£ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token keyword">as</span> MyButton <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/components'</span>
</code></pre></div><p>ç»„ä»¶åˆ«åï¼Œä½¿ç”¨ä¸Šè¿°æ–¹æ³•æ”¶é›†åˆ°çš„ç»„ä»¶æ˜¯MyButtonï¼Œåœ¨transformElementå¤„ç†åˆ†æ”¯çš„æ—¶å€™ï¼ŒMyButtonå¹¶ä¸åœ¨å¯ç”¨åˆ—è¡¨ä¸­ï¼Œé‚£è¿™ä¸ªButtonçš„ç¼–è¯‘å°±ä¼šè¢«é—æ¼æ‰äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¾—æ”¹å†™ä¸Šè¿°çš„æ–¹æ³•ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>visitor<span class="token operator">:</span> <span class="token punctuation">{</span>
  JSXElement<span class="token operator">:</span> transformJSX<span class="token punctuation">,</span>
  JSXFragment<span class="token operator">:</span> transformJSX<span class="token punctuation">,</span>
  Program<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">enter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> <span class="token punctuation">{</span> opts <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> taroComponentsMap <span class="token operator">=</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span>hub<span class="token punctuation">.</span>file<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>taroComponentsMap <span class="token operator">||</span><span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> stmt <span class="token keyword">of</span> path<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">isImportDeclaration</span><span class="token punctuation">(</span>stmt<span class="token punctuation">.</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// æ˜¯å¦æ˜¯@tarojs/componentsçš„åŒ…</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isTaroComponent</span><span class="token punctuation">(</span>stmt<span class="token punctuation">.</span>node<span class="token punctuation">.</span>source<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            stmt<span class="token punctuation">.</span>node<span class="token punctuation">.</span>specifiers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">specifier</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token comment">// åŒ…ä½“å¯¼å‡ºçš„å˜é‡å</span>
              <span class="token keyword">const</span> importedName <span class="token operator">=</span> specifier<span class="token punctuation">.</span>imported<span class="token punctuation">.</span>name
              <span class="token comment">// å½“å‰ä½¿ç”¨çš„å˜é‡å é˜²æ­¢åˆ«å</span>
              <span class="token comment">// import { Button as MyButton } from '@tarojs/components'</span>
              <span class="token keyword">const</span> localName <span class="token operator">=</span> specifier<span class="token punctuation">.</span>local<span class="token punctuation">.</span>name
              taroComponentsMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>localName<span class="token punctuation">,</span> importedName<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>merged<span class="token punctuation">.</span>validate<span class="token punctuation">)</span> path<span class="token punctuation">.</span><span class="token function">traverse</span><span class="token punctuation">(</span>JSXValidator<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    exit<span class="token operator">:</span> postprocess
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>å°†Setæ•°æ®ç»“æ„æ”¹ä¸ºMapï¼Œé‡‡ç”¨localName(å¯¹åº”çš„MyButton): importedName(å¯¹åº”çš„Button)ï¼Œè¿™æ ·èƒ½å¤Ÿæ–¹ä¾¿transformElementç›´æ¥è·å–åˆ°æºç»„ä»¶åã€‚</p></blockquote> <h4 id="å…¶ä»–é—®é¢˜"><a href="#å…¶ä»–é—®é¢˜" class="header-anchor">#</a> å…¶ä»–é—®é¢˜</h4> <p>åœ¨ä½¿ç”¨babelå¤„ç†åï¼Œç”±äºæˆ‘ä»¬æŠŠæºæ–‡ä»¶'@tarojs/components'çš„ç»„ä»¶åœ¨æ­£æ–‡ä¸­å¹¶æ²¡æœ‰åœ¨ä½¿ç”¨äº†(å˜ä¸ºåŸç”Ÿæ ‡ç­¾ä½¿ç”¨)ï¼Œå¯¼è‡´è¿™ä¸ªåŒ…å˜ä¸ºäº†ä¸€ä¸ªæ— å¼•ç”¨import chunkï¼Œè¿™åœ¨taroçš„æ”¶é›†å°ç¨‹åºç»„ä»¶chunksæµç¨‹ä¸­ï¼Œä¼šæ”¶é›†ä¸åˆ°ã€‚æ‰€ä»¥è¿˜å¾—å¯¹è¿™ä¸ªåœ¨taroçš„æµç¨‹ä¸­ç‰¹æ®Šå¤„ç†ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">!</span><span class="token punctuation">(</span>nameOfCallee <span class="token operator">&amp;&amp;</span> nameOfCallee<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'_$createElement'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token comment">// solidjsåˆ›å»ºå…ƒç´ </span>
</code></pre></div><p>å¤§æ¦‚å°±æ˜¯åœ¨TaroComponentsExportsPluginï¼Œå†è¿›è¡Œä¸€æ¬¡æ”¶é›†ï¼Œsolidè½¬æ¢åçš„æºç ä¸­ï¼Œéƒ½ä¼šç”¨_$createElementæ–¹æ³•è¿›è¡Œå…ƒç´ åˆ›å»ºï¼Œæ‰€ä»¥å°±å»æ£€ç´¢è¿™ä¸ªæ–¹æ³•é‡Œçš„æ ‡ç­¾ä½œä¸ºå°ç¨‹åºä½¿ç”¨åˆ°çš„ç»„ä»¶å³å¯ï¼Œè¿™åœ¨taroä¸­ä¹Ÿæœ‰æ¯”è¾ƒå¤šç±»ä¼¼å…¶ä»–ç¬¬ä¸‰æ–¹ç»„ä»¶åº“æ”¶é›†ä¸åˆ°çš„å¤„ç†æ–¹æ³•ï¼Œè¿™é‡Œä¹Ÿæ˜¯å¤§ä½¬ç»™æˆ‘æŒ‡æ˜åœ¨è¿™é‡Œå¤„ç†ï¼Œæ‰€ä»¥å°±ä¸åœ¨ç»§ç»­æ·±å…¥ç ”ç©¶ã€‚</p> <h2 id="h5ç«¯çš„è§£å†³"><a href="#h5ç«¯çš„è§£å†³" class="header-anchor">#</a> H5ç«¯çš„è§£å†³</h2> <p>ç”±äºtaroåœ¨h5ä¸­ç»Ÿä¸€éƒ½æ˜¯ä½¿ç”¨<a href="https://stenciljs.com/" target="_blank" rel="noopener noreferrer">stencil<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>åšçš„web-componentï¼Œè€Œstencilçš„outputé€‚é…å™¨å¹¶æ²¡æœ‰solidçš„å®ç°ï¼Œåœ¨solidå®ç°web-componentçš„è¯ï¼Œä»–è‡ªå·±æœ‰ä¸ªsolid-elementçš„åº“ï¼Œå†™solidçš„ä»£ç ï¼Œèƒ½å¤Ÿå°†å…¶defineä¸ºcustomElementï¼Œè¿™2è€…æœ€ç»ˆå¯¼å‡ºçš„å®ç°éƒ½ä¼šèµ°defineCustomElementçš„åŸç”Ÿæ–¹æ³•ï¼Œä»ç»“æœä¸Šæ¥è¯´æ˜¯ä¸€è‡´çš„ï¼Œè¦ä¹ˆå°±æŠŠå„ä¸ªtaroçš„ç»„ä»¶ç”¨solid-elementå®ç°ä¸€éï¼Œä½†æ˜¯è¿™å·¥ä½œé‡ä¹Ÿå¾ˆå¤§ï¼Œå¹¶ä¸”ç»´æŠ¤æˆæœ¬ä¹Ÿå˜é«˜ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆä¹Ÿè¢«é©³å›äº†ã€‚</p> <h3 id="stencil-solid-output"><a href="#stencil-solid-output" class="header-anchor">#</a> stencil-solid-output</h3> <p>å®ç°ä¸€ä¸ªstencil-solid-outputçš„é€‚é…å™¨ï¼Œå…¶å®taroçš„outputå¯¼å‡ºçš„componentï¼Œéƒ½éœ€è¦è‡ªå®šä¹‰ï¼Œé‚£ä¹ˆåªè¦å»å‚è€ƒåˆ«çš„outputé€‚é…å™¨å³å¯ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">const</span> generateProxies <span class="token operator">=</span> <span class="token punctuation">(</span>config<span class="token operator">:</span> Config<span class="token punctuation">,</span> components<span class="token operator">:</span> ComponentCompilerMeta<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> pkgData<span class="token operator">:</span> PackageJSON<span class="token punctuation">,</span> outputTarget<span class="token operator">:</span> OutputTargetSolid<span class="token punctuation">,</span> rootDir<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter"><span class="token builtin">string</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> distTypesDir <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>pkgData<span class="token punctuation">.</span>types<span class="token punctuation">)</span>
  <span class="token keyword">const</span> dtsFilePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>rootDir<span class="token punctuation">,</span> distTypesDir<span class="token punctuation">,</span> <span class="token constant">GENERATED_DTS</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> componentsTypeFile <span class="token operator">=</span> <span class="token function">relativeImport</span><span class="token punctuation">(</span>outputTarget<span class="token punctuation">.</span>proxiesFile<span class="token punctuation">,</span> dtsFilePath<span class="token punctuation">,</span> <span class="token string">'.d.ts'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> pathToCorePackageLoader <span class="token operator">=</span> <span class="token function">getPathToCorePackageLoader</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> outputTarget<span class="token punctuation">)</span>

  <span class="token keyword">const</span> imports <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/* eslint-disable */
  /* tslint:disable */
  /* auto-generated solid proxies */
  import { createSolidComponent } from './solid-component-lib';\n</span><span class="token template-punctuation string">`</span></span>

  <span class="token keyword">const</span> <span class="token function-variable function">generateTypeImports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>outputTarget<span class="token punctuation">.</span>componentCorePackage <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> dirPath <span class="token operator">=</span> outputTarget<span class="token punctuation">.</span>includeImportCustomElements <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>outputTarget<span class="token punctuation">.</span>customElementsDir <span class="token operator">||</span> <span class="token string">'components'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">''</span>
      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">import type { </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">IMPORT_TYPES</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> } from '</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">normalizePath</span><span class="token punctuation">(</span>outputTarget<span class="token punctuation">.</span>componentCorePackage<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dirPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">';\n</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">import type { </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">IMPORT_TYPES</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> } from '</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">normalizePath</span><span class="token punctuation">(</span>componentsTypeFile<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">';\n</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> typeImports <span class="token operator">=</span> <span class="token function">generateTypeImports</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">let</span> sourceImports <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token keyword">let</span> registerCustomElements <span class="token operator">=</span> <span class="token string">''</span>

  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    imports<span class="token punctuation">,</span>
    typeImports<span class="token punctuation">,</span>
    sourceImports<span class="token punctuation">,</span>
    registerCustomElements<span class="token punctuation">,</span>
    components<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">cmpMeta</span> <span class="token operator">=&gt;</span> <span class="token function">createComponentDefinition</span><span class="token punctuation">(</span>cmpMeta<span class="token punctuation">,</span> outputTarget<span class="token punctuation">.</span>includeImportCustomElements<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™éƒ¨åˆ†ä»£ç å°±ä¸éœ€è¦ç»†çœ‹äº†ï¼Œå› ä¸ºæˆ‘åˆ äº†ä¸€éƒ¨åˆ†ï¼Œè€Œä¸”è¿™ä¸ªé€‚é…å™¨çš„å®ç°å¹¶ä¸æ˜¯é‡ç‚¹ã€‚</p> <h3 id="createsolidcomponent"><a href="#createsolidcomponent" class="header-anchor">#</a> createSolidComponent</h3> <p>createSolidComponentè¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥æ²Ÿé€šstencilä¸solidçš„è¿æ¥å™¨ï¼Œç”±äºstencilå¯¼å‡ºçš„ç»„ä»¶éƒ½å·²ç»å˜ä¸ºweb-componentï¼Œç±»ä¼¼ä»¥ä¸‹ï¼š</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>color<span class="token operator">:</span> $<span class="token punctuation">{</span><span class="token function">color</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello world! </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCls</span><span class="token punctuation">(</span><span class="token string">'bold'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">set class</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setColor</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">set style</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>è¾“å‡ºåœ¨é¡µé¢ä¸Šçš„uiéƒ½ä¼šç¼–è¯‘ä¸ºweb-componentï¼š</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>taro-view-core</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>taro-view-core</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">color: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">color</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>taro-text-core</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello world!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>taro-text-core</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>taro-view-core</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>taro-button-core</span>  <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCls</span><span class="token punctuation">(</span><span class="token string">'bold'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">set class</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>taro-button-core</span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>taro-button-core</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setColor</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">set style</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>taro-button-core</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>taro-view-core</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>taro-view-core</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>taro-view-core</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å°†è¿™äº›taroçš„componentè½¬æ¢ä¸ºweb-componentå°±æ˜¯createSolidComponentåšçš„äº‹æƒ…ï¼Œé‚£ä¹ˆåˆ°åº•å¦‚ä½•åšçš„å‘¢ï¼Ÿ</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">const</span> createSolidComponent <span class="token operator">=</span> <span class="token operator">&lt;</span>
  PropType<span class="token punctuation">,</span>
  ElementType <span class="token keyword">extends</span> <span class="token class-name">HTMLStencilElement</span><span class="token punctuation">,</span>
  ExpandedPropsTypes <span class="token operator">=</span> <span class="token builtin">any</span>
<span class="token operator">&gt;</span><span class="token punctuation">(</span>
  tagName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  manipulatePropsFunction<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>
    <span class="token parameter">originalProps<span class="token operator">:</span> StencilSolidInternalProps<span class="token operator">&lt;</span>ElementType<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    newProps<span class="token operator">:</span> <span class="token builtin">any</span></span>
  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ExpandedPropsTypes<span class="token punctuation">,</span>
  defineCustomElement<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> Component<span class="token operator">&lt;</span>PropType <span class="token operator">&amp;</span> <span class="token constant">JSX</span><span class="token punctuation">.</span>DOMAttributes<span class="token operator">&lt;</span>ElementType<span class="token operator">&gt;</span> <span class="token operator">&amp;</span> ComponentSupplementaryTypes<span class="token operator">&gt;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>defineCustomElement <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">defineCustomElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">SolidComponentWrapper</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token operator">:</span> <span class="token punctuation">{</span> children<span class="token operator">:</span> <span class="token constant">JSX</span><span class="token punctuation">.</span>Element <span class="token punctuation">}</span> <span class="token operator">&amp;</span> <span class="token builtin">any</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>local<span class="token punctuation">,</span> other<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">splitProps</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'children'</span><span class="token punctuation">,</span> <span class="token string">'ref'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> eventsMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> reactiveKeys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> <span class="token function-variable function">getUnTrackProps</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">_props<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> propsToPass<span class="token operator">:</span> <span class="token keyword">typeof</span> props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> _props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_props<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">continue</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isPropNameAnEvent</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          eventsMap<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> _props<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
          <span class="token keyword">continue</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isReactiveKey</span><span class="token punctuation">(</span>_props<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          reactiveKeys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
          <span class="token keyword">continue</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">const</span> propValue <span class="token operator">=</span> _props<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
        propsToPass<span class="token punctuation">[</span><span class="token function">camelToDashCase</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> propValue
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>manipulatePropsFunction <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        propsToPass <span class="token operator">=</span> <span class="token function">manipulatePropsFunction</span><span class="token punctuation">(</span>_props<span class="token punctuation">,</span> propsToPass<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> propsToPass
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> unTrackProps <span class="token operator">=</span> <span class="token function">getUnTrackProps</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>reactiveProps<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">splitProps</span><span class="token punctuation">(</span>other<span class="token punctuation">,</span> reactiveKeys<span class="token punctuation">)</span>

    <span class="token keyword">const</span> _mergeProps <span class="token operator">=</span> <span class="token function">mergeProps</span><span class="token punctuation">(</span>unTrackProps<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token function-variable function">ref</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">element<span class="token operator">:</span> HTMLElement</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>local<span class="token punctuation">.</span>ref <span class="token operator">&amp;&amp;</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>local<span class="token punctuation">.</span>ref<span class="token punctuation">)</span><span class="token punctuation">)</span> local<span class="token punctuation">.</span><span class="token function">ref</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
      <span class="token function">syncEvents</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> eventsMap<span class="token punctuation">)</span>
      <span class="token function">setReactiveProps</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> reactiveProps<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>tagName<span class="token punctuation">,</span> _mergeProps<span class="token punctuation">,</span> local<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> SolidComponentWrapper <span class="token keyword">as</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™é‡Œä¸»è¦è§£å†³çš„é—®é¢˜å¦‚ä¸‹ï¼š</p> <ul><li>ä½¿ç”¨solidä¸­çš„hå‡½æ•°åˆ›å»ºweb-componentsï¼Œå…¶å®å°±æ˜¯è‡ªå®šä¹‰elementï¼Œå› ä¸ºæ³¨å†Œweb-componentéƒ½å·²ç»åœ¨å†…éƒ¨æ³¨å†Œå®Œæˆ</li> <li>propsçš„å“åº”å¼å±æ€§éœ€å…³è”å¹¶èƒ½ä¾èµ–æ›´æ–°ui</li></ul> <p>åœ¨åˆ©ç”¨hå‡½æ•°çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°è®¸è®¸å¤šå¤šçš„é—®é¢˜ï¼Œå„ç§å½¢æ€æˆ‘éƒ½å°è¯•è¿‡ï¼Œè¿˜è‡ªå·±å¯¹childrenè¿›è¡Œå¾ªç¯éå†ï¼Œå¹¶é€’å½’è°ƒç”¨hå‡½æ•°ã€‚åˆ°æœ€åï¼Œè‡ªå·±çœ‹äº†hå‡½æ•°çš„æºç åï¼Œå‘ç°ä»–å†…éƒ¨å·²ç»ä¼šå¯¹childrenè¿›è¡Œé€’å½’å¤„ç†äº†ï¼Œæˆ‘æ˜¯å¤šæ­¤ä¸€ä¸¾çš„è¡Œä¸ºï¼Œå½“æŠŠhå‡½æ•°çš„æ­£ç¡®å½¢æ€ä¹¦å†™å®Œæ¯•åï¼Œåé¢çš„propsæ›´æ–°ï¼Œè€—è´¹çš„æ—¶é—´å°±å°‘å¾ˆå¤šï¼Œå°±è·Ÿä¹‹å‰å†™solidçš„ç¼–è¯‘å™¨setPropså¾ˆç±»ä¼¼ã€‚</p> <h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="header-anchor">#</a> æ€»ç»“</h2> <p>è¿™ä¸€æ¬¡çš„taro-solidçš„å“åº”å¼å¤„ç†ï¼Œè™½ç„¶åªæ˜¯ä¸€ä¸ªbugï¼Œä½†æ˜¯è¿™æ¶‰åŠåˆ°çš„æ”¹åŠ¨ä¹Ÿå¾ˆå¤šï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šéƒ½å·²ç»ä¸ç®—æ˜¯ä¸€ä¸ªbugçš„å¤„ç†ï¼Œéœ€è¦æ·±å…¥åˆ°äº†ç¼–è¯‘å±‚é¢ï¼Œå¯¹babelå·¥å…·çš„ä½¿ç”¨åˆåŠ æ·±äº†å…¶ç†è§£ï¼Œå¹¶ä¸”åœ¨å¤„ç†å¤§å‹æ¡†æ¶ä¸Šï¼Œéœ€è¦è€ƒè™‘çš„ä¸œè¥¿ä¹Ÿä¼šå¾ˆå¤šï¼Œå°½é‡åšåˆ°æ»¡è¶³ç”¨æˆ·éœ€æ±‚çš„åŒæ—¶ï¼Œä¹Ÿè¦è€ƒè™‘åˆ°åæœŸçš„ç»´æŠ¤æ‹“å±•é—®é¢˜ã€‚å¸Œæœ›taro4ç‰ˆæœ¬èƒ½å¤Ÿé¡ºåˆ©å‘å¸ƒï¼Œä¹Ÿç¥taroèƒ½å˜å¾—æ›´å¥½ğŸ‰ğŸ‰ğŸ‰</p></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">4/22/2024, 7:58:57 AM</span></div></footer> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-44bd5a18 data-v-44bd5a18><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-44bd5a18><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-44bd5a18></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-44bd5a18></path></svg></div><!----></div></div>
    <script src="/blog/assets/js/app.cc9a024a.js" defer></script><script src="/blog/assets/js/3.db1300e1.js" defer></script><script src="/blog/assets/js/1.83ab4468.js" defer></script><script src="/blog/assets/js/46.3a33d0a3.js" defer></script><script src="/blog/assets/js/10.c35fdf02.js" defer></script>
  </body>
</html>
